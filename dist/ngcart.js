/*! ngCart 2014-06-17 */
"use strict";function log(a){console.log(a)}angular.module("ngCart",[]).config([function(){}]).provider("$ngCart",function(){this.$get=function(){}}).run(["ngCart",function(a){a.setCart(Modernizr.localstorage&&angular.isArray(JSON.parse(localStorage.getItem("cart")))?JSON.parse(localStorage.getItem("cart")):[])}]).service("ngCart",["ngCartItem",function(){this.setCart=function(a){this.$cart=a},this.getCart=function(){return this.$cart},this.addItem=function(a,b,c,d,e){d||(d=1);var f={id:a,name:b,price:c,quantity:d,data:e};this.$cart.push(f),this.$saveCart(this.$cart)},this.itemInCart=function(a){var b=!1;return angular.forEach(this.getCart(),function(c){a==c.id&&(b=!0)}),b},this.totalItems=function(){return this.getCart().length},this.totalCost=function(){var a=0;return angular.forEach(this.getCart(),function(b){a+=b.price*b.quantity}),a},this.quantity=function(a,b){var c=this.$cart[a].quantity+b;1>c&&(c=1),this.$cart[a].quantity=c,this.$saveCart()},this.removeItem=function(a){this.$cart.splice(a,1),this.$saveCart(this.$cart)},this.empty=function(){this.$cart=[],Modernizr.localstorage&&localStorage.removeItem("cart")},this.$saveCart=function(){Modernizr.localstorage&&localStorage.setItem("cart",JSON.stringify(this.getCart()))}}]).service("ngCartItem",[function(){this.$item=null,this.$quantity=1,this.getTotal=function(){return this.$quantity*this.$item.price},this.getQuantity=function(){return this.$quantity},this.getItem=function(){return this.$item},this.setItem=function(a){this.$item=a},this.setQuantity=function(a){this.$quantity=a}}]).controller("CartController",["$scope","ngCart",function(a,b){a.cart=b,a.addToCart=function(a,c,d,e,f){b.addItem(a,c,d,e,f)}}]).directive("addtocart",function(){return{restrict:"E",controller:"CartController",scope:{},transclude:!0,templateUrl:"/template/addtocart.html",link:function(a,b,c){b.on("click",function(){a.addToCart(c.id,c.name,c.price,c.quantity,c.data)})}}}).directive("cart",function(){return{restrict:"E",controller:"CartController",scope:{},templateUrl:"/template/cart.html",link:function(){}}});